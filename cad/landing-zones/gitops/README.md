# CSR Git Ops Pipeline

This blueprint instantiates a GitOps CI/CD pipeline using Cloud Source Repositories and Cloud Build. After installing this blueprint, you will be able to:
1. Manage your infrastructure via version control.
2. Create merge requests to review changes
3. Manage plain KRM or blueprints and specify kpt functions for Cloud Build to use to hydrate/ validate your configs
4. Automatically apply your git repo configs to your Config Controller cluster on merge

The components generated by this blueprint include:

- [Config Sync](https://cloud.google.com/kubernetes-engine/docs/add-on/config-sync/overview): This allows Config Controller to apply KRM directly from the deployment repo
- Source repo (DRY): This is where your changes will be made. You can push plain KRM or [blueprints](https://cloud.google.com/anthos-config-management/docs/concepts/blueprints).
- [Cloud Build trigger](https://cloud.google.com/cloud-build/docs/automating-builds/create-manage-triggers): After source repo changes are pushed/ merged, then Cloud Build will perform hydration and validation using your specified kpt functions. This is a no-op if you are using plain KRM. Changes are then pushed to the deployment repo under the `config` folder to be applied by Config Sync.
- Deployment repo (WET): After source repo changes are made, this is where hydrated configurations are pushed to and applied to your cluster via Config Sync.
- Various IAM policy bindings and GSA for cloud build to access the repositories + for Config Sync to be able to sync from the deployment repo.
